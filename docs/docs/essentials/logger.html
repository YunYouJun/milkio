<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logger | Milkio Docs</title>
    <meta name="description" content="A human-centered Bun framework, developing APIs is now easy enough!">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/milkio/assets/style.GR-lnwpN.css" as="style">
    
    <script type="module" src="/milkio/assets/app.BaRIK2wd.js"></script>
    <link rel="preload" href="/milkio/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/milkio/assets/chunks/framework.B_Y9JRDA.js">
    <link rel="modulepreload" href="/milkio/assets/chunks/theme.kr4yAtXS.js">
    <link rel="modulepreload" href="/milkio/assets/docs_essentials_logger.md.CT8ezQ3D.lean.js">
    <script>(function(e,i,t,r,m,n,s){e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},n=i.createElement(r),n.async=1,n.src="https://www.clarity.ms/tag/"+m,s=i.getElementsByTagName(r)[0],s.parentNode.insertBefore(n,s)})(window,document,"clarity","script","lpkggmj4ib");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-844edcde><div class="wrapper" data-v-844edcde><div class="container" data-v-844edcde><div class="title" data-v-844edcde><div class="VPNavBarTitle has-sidebar" data-v-844edcde data-v-0ad69264><a class="title" href="/milkio/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Milkio Docs</span><!--[--><!--]--></a></div></div><div class="content" data-v-844edcde><div class="content-body" data-v-844edcde><!--[--><!--]--><div class="VPNavBarSearch search" data-v-844edcde><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-844edcde data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/milkio/SUPPORT.html" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>
          <span class="lang-en">Sponsors</span>
          <span class="lang-zh">支持者们</span>
        </span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-844edcde data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-844edcde data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/southern-aurora/milkio" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-844edcde data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8e87c032><div class="item social-links" data-v-8e87c032><div class="VPSocialLinks social-links-list" data-v-8e87c032 data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/southern-aurora/milkio" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-844edcde data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-844edcde><div class="divider-line" data-v-844edcde></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-0b5c97a1><button data-v-0b5c97a1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-4871f9f5><div class="curtain" data-v-4871f9f5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4871f9f5><span class="visually-hidden" id="sidebar-aria-label" data-v-4871f9f5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><!----><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
          <span class="lang-en">Introduction</span>
          <span class="lang-zh">简介</span>
        </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/quick-start.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
          <span class="lang-en">Quick Start</span>
          <span class="lang-zh">快速开始</span>
        </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/generation-phase.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
          <span class="lang-en">GenerationPhase</span>
          <span class="lang-zh">生成阶段</span>
        </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0 has-active" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>
          <span class="lang-en">Essentials</span>
          <span class="lang-zh">基础功能</span>
        </h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/api.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">API</span>
              <span class="lang-zh">API 接口</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/api-test.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">APITest</span>
              <span class="lang-zh">APITest 接口测试</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/router.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Router</span>
              <span class="lang-zh">Router 路由</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/header.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Header</span>
              <span class="lang-zh">Header 头部</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/fail-handling.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">FailureHandling</span>
              <span class="lang-zh">FailureHandling 失败处理</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/use.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Use</span>
              <span class="lang-zh">Use 使用</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/bootstrap.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Bootstrap</span>
              <span class="lang-zh">Bootstrap 启动项</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/middleware.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Middleware</span>
              <span class="lang-zh">Middleware 中间件</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/meta.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Meta</span>
              <span class="lang-zh">Meta 元数据</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/config.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Config</span>
              <span class="lang-zh">Config 配置</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/essentials/logger.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Logger</span>
              <span class="lang-zh">Logger 日志</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>
          <span class="lang-en">Client</span>
          <span class="lang-zh">客户端</span>
        </h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/client/get-started.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
            <span class="lang-en">GetStarted</span>
            <span class="lang-zh">起步</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/client/middleware.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Middleware</span>
              <span class="lang-zh">Middleware 中间件</span>
            </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/client/publish-client.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">PublishClient</span>
              <span class="lang-zh">发布客户端</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Cookbook</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/cookbook/get-started.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
            <span class="lang-en">GetStarted</span>
            <span class="lang-zh">起步</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>
          <span class="lang-en">Extensions</span>
          <span class="lang-zh">扩展</span>
        </h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/extensions/drizzle.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>Drizzle</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/extensions/redis.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>Redis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/extensions/tson.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">TSON</span>
              <span class="lang-zh">TSON</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>VSCodeExtension</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/docs/quick-start.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
            <span class="lang-en">Template</span>
            <span class="lang-zh">Template 模板</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>
          <span class="lang-en">Document</span>
          <span class="lang-zh">文档</span>
        </h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/milkio/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>
              <span class="lang-en">Contribution</span>
              <span class="lang-zh">贡献</span>
            </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><!----><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--[--><!--[--><div class="doc-before-container"><!----></div><!--]--><!--]--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _milkio_docs_essentials_logger" data-v-e6f2a212><div><div class="enable-i18n"><!--[--><h1 id="logger" tabindex="-1">Logger <a class="header-anchor" href="#logger" aria-label="Permalink to &quot;Logger&quot;">​</a></h1><h1 id="logger-1" tabindex="-1">Logger <a class="header-anchor" href="#logger-1" aria-label="Permalink to &quot;Logger&quot;">​</a></h1><p>日志在应用线上问题排查中扮演着重要的角色。虽然我们可以使用 <code>console</code> 打印日志，但我们的日志需求可能更加多样化。例如，我们需要将日志不只是打印在控制台中，而是可以记录为文件，或者使用专门的日志平台。以及，我们需要对不同请求间打印的日志作区分来方便我们排错，尤其是在同时访问人数很多的情况下。</p><p>Logs play a crucial role in troubleshooting application issues. While we can use <code>console</code> to print logs, our logging requirements may be more diverse. For example, we may need to log not only to the console but also to files or use a dedicated logging platform. Additionally, we need to differentiate logs printed between different requests to facilitate debugging, especially in high-traffic scenarios.</p><p>在任何可以使用 context 的地方，都可以直接使用 logger。logger 的用法几乎和 console 一样。</p><p>In any place where context can be used, you can directly use logger. The usage of logger is almost the same as console.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 打印一条普通的日志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, Milkio!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 日志的第二个及之后的参数可以用来携带数据，这样日志会把这些数据也一起记录起来</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, Milkio!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 和 console 一样，也可以使用 debug, warn 或者 error 来记录不同级别的日志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这里的运行出错了 UwU&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Print a regular log</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, Milkio!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The second and subsequent parameters of the log can be used to carry data, so the log will also record these data together</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, Milkio!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Like console, you can also use debug or warn or error to record logs of different levels</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;An error occurred here UwU&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>或者，也可以使用 <code>useLogger</code> 方法来创建一个日志记录器，此时需要提供一个 <code>executeId</code> 参数。该参数来自你的 API 的<code>context</code>对象，并且是唯一的。对于每个请求，<code>executeId</code>都是不同的。Milkio 的日志记录器通过它们来区分不同的请求。</p><p>Alternatively, you can use the <code>useLogger</code> method to create a logger, which requires providing an <code>executeId</code> parameter. This parameter comes from the <code>context</code> object of your API and is unique. For each request, the <code>executeId</code> is different. Milkio&#39;s loggers use them to differentiate between different requests.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLogger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context.executeId);</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLogger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context.executeId);</span></span></code></pre></div><p>在某些特殊情况下，你可能无法获取到<code>executeId</code>。这种情况下，你可以传入<code>global</code>，日志记录器将向所有并发请求同时写入该日志。</p><p>In some special cases, you may not be able to obtain the <code>executeId</code>. In such cases, you can pass in <code>global</code>, and the logger will write to the log simultaneously for all concurrent requests.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLogger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;global&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useLogger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;global&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="日志标签" tabindex="-1">日志标签 <a class="header-anchor" href="#日志标签" aria-label="Permalink to &quot;日志标签&quot;">​</a></h2><h2 id="log-tags" tabindex="-1">Log Tags <a class="header-anchor" href="#log-tags" aria-label="Permalink to &quot;Log Tags&quot;">​</a></h2><p>除了打印日志之外，你还可以为一个请求打上日志标签。通过 <code>loggerPushTags</code> 方法，可以为某个请求添加若干自定义标签。</p><p>In addition to logging, you can also label a request with log tags. By using the <code>loggerPushTags</code> method, you can add multiple custom tags to a request.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { loggerPushTags } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Milkio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loggerPushTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(executeId, { userInfo: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, permissions: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { loggerPushTags } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Milkio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loggerPushTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(executeId, { userInfo: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, permissions: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p>在以往的日志中，我们常常直接将请求的用户信息、权限等数据输出到日志中，这样会掩盖了关键信息。合理地使用标签有助于使你的日志更加清晰易读，只保留关键信息。</p><p>In previous logs, we often directly output user information, permissions, and other data of the requests to the logs, which obscures critical information. Using labels appropriately helps make your logs clearer and easier to read, while retaining only the key information.</p><h2 id="内置日志标签" tabindex="-1">内置日志标签 <a class="header-anchor" href="#内置日志标签" aria-label="Permalink to &quot;内置日志标签&quot;">​</a></h2><p>Built-in log tags</p><p>Milkio 会自动为你的每个请求添加一些日志标签。以下标签会被使用：</p><p>Milkio will automatically add some logging labels to each of your requests. The following labels will be used:</p><table><thead><tr><th style="text-align:right;">键</th><th>值</th></tr></thead><tbody><tr><td style="text-align:right;"><code>from</code></td><td>来源 &quot;http-server&quot; | &quot;execute&quot;</td></tr><tr><td style="text-align:right;"><code>executeId</code></td><td>执行此请求的唯一 id</td></tr><tr><td style="text-align:right;"><code>method</code></td><td>请求方式</td></tr><tr><td style="text-align:right;"><code>ip</code></td><td>请求发起者的 IP 地址</td></tr><tr><td style="text-align:right;"><code>url</code></td><td>请求地址</td></tr><tr><td style="text-align:right;"><code>params</code></td><td>请求的参数 (Object)</td></tr><tr><td style="text-align:right;"><code>body</code></td><td>最终响应的数据 (Raw String)</td></tr><tr><td style="text-align:right;"><code>timein</code></td><td>接收到请求的时间 (Number)</td></tr><tr><td style="text-align:right;"><code>timeout</code></td><td>请求响应的时间 (Number)</td></tr><tr><td style="text-align:right;"><code>requestHeaders</code></td><td>请求头 (Object)</td></tr><tr><td style="text-align:right;"><code>responseHeaders</code></td><td>响应头 (Object)</td></tr></tbody></table><table><thead><tr><th style="text-align:right;">Key</th><th>Value</th></tr></thead><tbody><tr><td style="text-align:right;"><code>from</code></td><td>Source: &quot;http-server&quot; | &quot;execute&quot;</td></tr><tr><td style="text-align:right;"><code>executeId</code></td><td>Unique ID of the execution of this request</td></tr><tr><td style="text-align:right;"><code>method</code></td><td>Request method</td></tr><tr><td style="text-align:right;"><code>ip</code></td><td>IP address of the requester</td></tr><tr><td style="text-align:right;"><code>url</code></td><td>Request URL</td></tr><tr><td style="text-align:right;"><code>params</code></td><td>Request parameters (Object)</td></tr><tr><td style="text-align:right;"><code>body</code></td><td>Raw string of the final response</td></tr><tr><td style="text-align:right;"><code>timein</code></td><td>Time when the request was received (Number)</td></tr><tr><td style="text-align:right;"><code>timeout</code></td><td>Time for the request to respond (Number)</td></tr><tr><td style="text-align:right;"><code>requestHeaders</code></td><td>Request headers (Object)</td></tr><tr><td style="text-align:right;"><code>responseHeaders</code></td><td>Response headers (Object)</td></tr></tbody></table><p>注意，你不能假设这些日志标签始终存在。例如，在某些极端情况下，请求被直接终止时，可能不会添加<code>body</code>、<code>params</code>、<code>responseHeaders</code>等内容。此外，当通过编写 <code>execute</code> 代码而不是发送 HTTP 请求的方式进行调用时，像 <code>ip</code> 等数据将不存在，并且可能会获得其他一些值。</p><p>Understood. Please note that these log labels may not always be present. For example, in certain extreme cases where a request is terminated directly, contents such as <code>body</code>, <code>params</code>, <code>responseHeaders</code>, etc. may not be added. Additionally, when calling via code using <code>execute</code> instead of sending an HTTP request, data like <code>ip</code> may not exist and other values may be obtained.</p><h2 id="自定义日志记录器" tabindex="-1">自定义日志记录器 <a class="header-anchor" href="#自定义日志记录器" aria-label="Permalink to &quot;自定义日志记录器&quot;">​</a></h2><h2 id="custom-log-recorder" tabindex="-1">Custom log recorder <a class="header-anchor" href="#custom-log-recorder" aria-label="Permalink to &quot;Custom log recorder&quot;">​</a></h2><p>你可以根据需要自由修改 <code>/src/logger.ts</code> 来自定义日志记录器的行为。默认情况下，根据代码编写，你的日志记录器会直接在控制台中显示日志。</p><p>You are free to modify <code>/src/logger.ts</code> according to your needs to customize the behavior of the log recorder. By default, based on the code, your log recorder will display the logs directly in the console.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 文件: /src/logger.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LoggerOptions, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ExecuteId } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Milkio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loggerOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onSubmit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">logs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`🥛 Milkio 响应！来自 :`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags.url);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tags));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onInsert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console[options.loggerLevel](options.description, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.params);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">satisfies</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoggerOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file: /src/logger.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LoggerOptions, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ExecuteId } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Milkio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> loggerOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onSubmit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">logs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`🥛 Milkio Responsed! by :`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tags.url);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tags));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  onInsert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console[options.loggerLevel](options.description, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.params);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">satisfies</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoggerOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="onsubmit" tabindex="-1">onSubmit <a class="header-anchor" href="#onsubmit" aria-label="Permalink to &quot;onSubmit&quot;">​</a></h3><h3 id="onsubmit-1" tabindex="-1">onSubmit <a class="header-anchor" href="#onsubmit-1" aria-label="Permalink to &quot;onSubmit&quot;">​</a></h3><p><code>onSubmit</code> 方法会在一个请求即将结束时被调用，它可以是一个异步方法或返回一个<code>Promise</code>。你可以在此阶段将与该请求相关的日志持久化保存。</p><p>The <code>onSubmit</code> method is called when a request is about to be completed. It can be an asynchronous method or return a <code>Promise</code>. You can use this stage to persistently save logs related to the request.</p><p>在这个方法中，你不仅可以获取该请求中记录的所有历史日志，还可以获取该请求上打过的所有标签。</p><p>In this method, you can not only retrieve all the historical logs recorded in the request, but also retrieve all the tags that have been applied to the request.</p><h3 id="oninsert" tabindex="-1">onInsert <a class="header-anchor" href="#oninsert" aria-label="Permalink to &quot;onInsert&quot;">​</a></h3><h3 id="oninsert-1" tabindex="-1">onInsert <a class="header-anchor" href="#oninsert-1" aria-label="Permalink to &quot;onInsert&quot;">​</a></h3><p><code>onInsert</code> 方法是用于在每次记录日志时被调用的，它必须是一个同步方法。你需要返回 <code>true</code> 或 <code>false</code>。当你返回 <code>false</code> 时，该日志将被丢弃。举个例子，你可以通过返回 <code>false</code> 来实现在生产环境中不记录 <code>debug</code> 级别日志的功能。</p><p>The <code>onInsert</code> method is called every time a log is recorded, and it must be a synchronous method. You need to return <code>true</code> or <code>false</code>. When you return <code>false</code>, the log will be discarded. For example, you can return <code>false</code> to disable logging of <code>debug</code> level logs in a production environment.</p><p>请不要在此方法中进行日志的持久化保存（例如将日志写入文件或发送到各种日志系统中）。由于每次请求都可能需要写入大量日志，这将导致频繁的 IO 操作，从而降低性能。</p><p>Please refrain from persistently saving logs in this method (such as writing logs to files or sending them to various logging systems). As each request may require a large amount of logging, this will result in frequent IO operations, leading to performance degradation.</p><!--]--></div></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-b77f9094><!--[--><!--]--><!----><nav class="prev-next" data-v-b77f9094><div class="pager" data-v-b77f9094><a class="VPLink link pager-link prev" href="/milkio/docs/essentials/config.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Previous page</span><span class="title" data-v-b77f9094>
              <span class="lang-en">Config</span>
              <span class="lang-zh">Config 配置</span>
            </span><!--]--></a></div><div class="pager" data-v-b77f9094><a class="VPLink link pager-link next" href="/milkio/docs/client/get-started.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Next page</span><span class="title" data-v-b77f9094>
            <span class="lang-en">GetStarted</span>
            <span class="lang-zh">起步</span>
            </span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"support.md\":\"DJBQAojz\",\"docs_client_middleware.md\":\"S7xLdJHk\",\"readme.md\":\"so0dFqdw\",\"docs_essentials_header.md\":\"DuIJreVX\",\"docs_essentials_api.md\":\"BkyiYTZy\",\"docs_generation-phase.md\":\"DMeEvVyX\",\"docs_essentials_bootstrap.md\":\"BZCIinXF\",\"docs_client_publish-client.md\":\"snsZkGAw\",\"docs_essentials_fail-handling.md\":\"BYZDt9dZ\",\"docs_client_get-started.md\":\"BOFtFGly\",\"docs_essentials_logger.md\":\"CT8ezQ3D\",\"docs_quick-start.md\":\"D_5xQ2LC\",\"docs_essentials_use.md\":\"BHdJGsht\",\"docs_essentials_router.md\":\"C0MQRPoD\",\"docs_essentials_config.md\":\"BOYByQCQ\",\"docs_extensions_drizzle.md\":\"CFv2akWM\",\"docs_essentials_api-test.md\":\"BFOrPVtv\",\"docs_essentials_meta.md\":\"_GsNtvn3\",\"docs_cookbook_get-started.md\":\"DIl1U9qj\",\"index.md\":\"DrbH8vgN\",\"docs_essentials_middleware.md\":\"D0CCQKe_\",\"docs_extensions_tson.md\":\"D2SOwJuJ\",\"docs_extensions_redis.md\":\"CtmigJTJ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Milkio Docs\",\"description\":\"A human-centered Bun framework, developing APIs is now easy enough!\",\"base\":\"/milkio/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/southern-aurora/milkio\"}],\"nav\":[{\"text\":\"\\n          <span class=\\\"lang-en\\\">Sponsors</span>\\n          <span class=\\\"lang-zh\\\">支持者们</span>\\n        \",\"link\":\"/SUPPORT\"}],\"sidebar\":[{\"text\":\"\\n          <span class=\\\"lang-en\\\">Introduction</span>\\n          <span class=\\\"lang-zh\\\">简介</span>\\n        \",\"link\":\"/\"},{\"text\":\"\\n          <span class=\\\"lang-en\\\">Quick Start</span>\\n          <span class=\\\"lang-zh\\\">快速开始</span>\\n        \",\"link\":\"/docs/quick-start\"},{\"text\":\"\\n          <span class=\\\"lang-en\\\">GenerationPhase</span>\\n          <span class=\\\"lang-zh\\\">生成阶段</span>\\n        \",\"link\":\"/docs/generation-phase\"},{\"text\":\"\\n          <span class=\\\"lang-en\\\">Essentials</span>\\n          <span class=\\\"lang-zh\\\">基础功能</span>\\n        \",\"items\":[{\"text\":\"\\n              <span class=\\\"lang-en\\\">API</span>\\n              <span class=\\\"lang-zh\\\">API 接口</span>\\n            \",\"link\":\"/docs/essentials/api\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">APITest</span>\\n              <span class=\\\"lang-zh\\\">APITest 接口测试</span>\\n            \",\"link\":\"/docs/essentials/api-test\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Router</span>\\n              <span class=\\\"lang-zh\\\">Router 路由</span>\\n            \",\"link\":\"/docs/essentials/router\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Header</span>\\n              <span class=\\\"lang-zh\\\">Header 头部</span>\\n            \",\"link\":\"/docs/essentials/header\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">FailureHandling</span>\\n              <span class=\\\"lang-zh\\\">FailureHandling 失败处理</span>\\n            \",\"link\":\"/docs/essentials/fail-handling\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Use</span>\\n              <span class=\\\"lang-zh\\\">Use 使用</span>\\n            \",\"link\":\"/docs/essentials/use\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Bootstrap</span>\\n              <span class=\\\"lang-zh\\\">Bootstrap 启动项</span>\\n            \",\"link\":\"/docs/essentials/bootstrap\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Middleware</span>\\n              <span class=\\\"lang-zh\\\">Middleware 中间件</span>\\n            \",\"link\":\"/docs/essentials/middleware\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Meta</span>\\n              <span class=\\\"lang-zh\\\">Meta 元数据</span>\\n            \",\"link\":\"/docs/essentials/meta\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Config</span>\\n              <span class=\\\"lang-zh\\\">Config 配置</span>\\n            \",\"link\":\"/docs/essentials/config\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Logger</span>\\n              <span class=\\\"lang-zh\\\">Logger 日志</span>\\n            \",\"link\":\"/docs/essentials/logger\"}]},{\"text\":\"\\n          <span class=\\\"lang-en\\\">Client</span>\\n          <span class=\\\"lang-zh\\\">客户端</span>\\n        \",\"items\":[{\"text\":\"\\n            <span class=\\\"lang-en\\\">GetStarted</span>\\n            <span class=\\\"lang-zh\\\">起步</span>\\n            \",\"link\":\"/docs/client/get-started\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">Middleware</span>\\n              <span class=\\\"lang-zh\\\">Middleware 中间件</span>\\n            \",\"link\":\"/docs/client/middleware\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">PublishClient</span>\\n              <span class=\\\"lang-zh\\\">发布客户端</span>\\n            \",\"link\":\"/docs/client/publish-client\"}]},{\"text\":\"Cookbook\",\"items\":[{\"text\":\"\\n            <span class=\\\"lang-en\\\">GetStarted</span>\\n            <span class=\\\"lang-zh\\\">起步</span>\\n            \",\"link\":\"/docs/cookbook/get-started\"}]},{\"text\":\"\\n          <span class=\\\"lang-en\\\">Extensions</span>\\n          <span class=\\\"lang-zh\\\">扩展</span>\\n        \",\"items\":[{\"text\":\"Drizzle\",\"link\":\"/docs/extensions/drizzle\"},{\"text\":\"Redis\",\"link\":\"/docs/extensions/redis\"},{\"text\":\"\\n              <span class=\\\"lang-en\\\">TSON</span>\\n              <span class=\\\"lang-zh\\\">TSON</span>\\n            \",\"link\":\"/docs/extensions/tson\"}]},{\"text\":\"VSCodeExtension\",\"items\":[{\"text\":\"\\n            <span class=\\\"lang-en\\\">Template</span>\\n            <span class=\\\"lang-zh\\\">Template 模板</span>\\n            \",\"link\":\"/docs/quick-start.md\"}]},{\"text\":\"\\n          <span class=\\\"lang-en\\\">Document</span>\\n          <span class=\\\"lang-zh\\\">文档</span>\\n        \",\"items\":[{\"text\":\"\\n              <span class=\\\"lang-en\\\">Contribution</span>\\n              <span class=\\\"lang-zh\\\">贡献</span>\\n            \",\"link\":\"/README\"}]}],\"aside\":false,\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>