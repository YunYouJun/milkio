import{V as l}from"./chunks/theme.kr4yAtXS.js";import{c as r,J as e,w as a,E as k,o as d,m as s,p as n,a as i}from"./chunks/framework.B_Y9JRDA.js";const p=s("h1",{id:"简介",tabindex:"-1"},[i("简介 "),s("a",{class:"header-anchor",href:"#简介","aria-label":'Permalink to "简介"'},"​")],-1),c=s("h1",{id:"overview",tabindex:"-1"},[i("Overview "),s("a",{class:"header-anchor",href:"#overview","aria-label":'Permalink to "Overview"'},"​")],-1),E=s("p",null,"🌟 Milkio 是一个令人愉快的 API 框架 —— Serverless 优先、仅限 TypeScript、支持所有 JavaScript 运行时",-1),g=s("p",null,"🌟 Milkio is a Pleasant Framework - Serverless First, TypeScript Only, Support for All JavaScript Runtimes",-1),y=s("p",null,"关一帆对程心说，只要你把自己的人生限制在十万年内，把生活的范围限制在一千光年内，那些事就与你无关。十万年、一千光年，够了吧？",-1),u=s("p",null,"Guan Yifan said to Cheng Xin, As long as you live your life within a hundred thousand years and a thousand light-years, none of those things need concern you. That ought to be enough for anyone.",-1),m=s("p",null,"是的，只要我们愿意舍弃一些选择，这个世界就会足够地令人愉快了。Milkio 通过让你忘记一些东西（HTTP 的复杂性、MVC、JavaScript）来使你的开发过程变得愉快。",-1),_=s("p",null,"Yes, as long as we are willing to give up some choices, this world can be pleasant enough. Milkio makes your development process pleasant by helping you forget about some things (the complexity of HTTP, MVC, JavaScript).",-1),F=s("h2",{id:"忘记复杂的-i-o",tabindex:"-1"},[i("忘记复杂的 I/O "),s("a",{class:"header-anchor",href:"#忘记复杂的-i-o","aria-label":'Permalink to "忘记复杂的 I/O"'},"​")],-1),b=s("h2",{id:"forget-about-complex-i-o",tabindex:"-1"},[i("Forget about complex I/O "),s("a",{class:"header-anchor",href:"#forget-about-complex-i-o","aria-label":'Permalink to "Forget about complex I/O"'},"​")],-1),f=s("p",null,"在 Milkio 中，没有复杂的控制器和注解，你只需要编写一个简单的方法，并将其放置在 apps 目录中，它就直接可以通过输入和它所在路径相同的 URL 进行调用。你的方法是类型安全的，任何不符合你方法所期望的类型的输入都会被拒绝，符合类型要求但多余的属性都会被剔除。当然，在这背后我们施加了一些“魔法🪄”，但对你来说，编写 API 就是这么简单。",-1),A=s("p",null,'In Milkio, there are no complex controllers and annotations. You only need to write a simple method and place it in the apps directory. It can be directly called by using a URL that matches its input and its location. Your method is type-safe, and any input that does not match the expected types will be rejected, and any extra properties will be removed. Of course, there is some "magic🪄" happening behind the scenes, but for you, writing APIs is as simple as that.',-1),v=s("p",null,"试试简单地向世界问好…？ (๑´ㅂ`๑)",-1),C=s("p",null,"Simply say hello to world..? (๑´ㅂ`๑)",-1),B=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 这是一个向世界问候的API！")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 这些 ~~注释~~ 会被呈现到 **Cookbook** 当中")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," api"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineApi"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  meta: {},")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  async"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," action"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"    params"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," string"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," typia"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MinLength"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," typia"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaxLength"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"16"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">,")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ) {")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," `你好世界! (来自 ${"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"params"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"})`")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")])])])],-1),P=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * This is an API that greets world!")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * These ~~comments~~ will be presented by the **Cookbook**")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," api"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineApi"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  meta: {},")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  async"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," action"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"    params"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," string"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," typia"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MinLength"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," typia"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaxLength"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"16"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">,")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ) {")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," `hello world! (by ${"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"params"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"})`")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")])])])],-1),w=s("p",null,"然后在你的客户端中调用它，是的，没有什么 Axios 或者 Fetch，当你输入路径，会由 TypeScript 自动完成帮助你补全：",-1),x=s("p",null,"And then call it in your client, yes, without any Axios or Fetch. When you input the path, TypeScript will automatically provide auto-completion to help you complete it:",-1),M=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," result"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," await"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," client."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"execute"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"hello-world/say"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"🥛 Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"result.success) "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"return"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," alert"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result.message)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result.data) "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 输出: hello world! (by 🥛 Milkio)")])])])],-1),I=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," result"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," await"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," client."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"execute"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"hello-world/say"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"🥛 Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"result.success) "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"return"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," alert"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result.message)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result.data) "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// output: hello world! (by 🥛 Milkio)")])])])],-1),D=s("h2",{id:"忘记-javascript",tabindex:"-1"},[i("忘记 JavaScript "),s("a",{class:"header-anchor",href:"#忘记-javascript","aria-label":'Permalink to "忘记 JavaScript"'},"​")],-1),S=s("h2",{id:"forget-javascript",tabindex:"-1"},[i("Forget JavaScript "),s("a",{class:"header-anchor",href:"#forget-javascript","aria-label":'Permalink to "Forget JavaScript"'},"​")],-1),T=s("p",null,"在 Milkio 中，你只能使用 TypeScript，但这是一件好事！",-1),j=s("p",null,"In Milkio, you will only use TypeScript, but this is a good thing!",-1),q=s("p",null,"Milkio 利用 TypeScript 类型来为你的 API 自动实施类型安全，就像前文中所描述的那样。尽管这要求你所有的代码都使用 TypeScript 编写，但这是一笔非常划算的交易。",-1),J=s("p",null,"Milkio utilizes TypeScript types to automatically enforce type safety for your API, as described earlier. While this requires all your code to be written in TypeScript, it is a very worthwhile trade-off.",-1),N=s("p",null,"Milkio 的类型系统经过了大量的设计，可以自动推导你代码中的类型，你可以享受完整的自动完成。同时，得益于 Milkio 在设计时对类型系统的重视，你可以轻易做到从为数据库定义实体，到验证你 API 的参数，编写类型的次数为 0 - 1 次！",-1),W=s("p",null,"Milkio's type system has undergone extensive design and can automatically infer the types in your code, allowing you to enjoy full automatic completion. Additionally, thanks to Milkio's emphasis on the type system during design, you can easily go from defining entities for your database, to validating API parameters, with only 0-1 instances of writing types!",-1),O=s("h2",{id:"端到端的类型安全",tabindex:"-1"},[i("端到端的类型安全 "),s("a",{class:"header-anchor",href:"#端到端的类型安全","aria-label":'Permalink to "端到端的类型安全"'},"​")],-1),U=s("h2",{id:"end-to-end-type-safety",tabindex:"-1"},[i("End-to-end Type Safety "),s("a",{class:"header-anchor",href:"#end-to-end-type-safety","aria-label":'Permalink to "End-to-end Type Safety"'},"​")],-1),R=s("p",null,"每一个 Milkio 工程都自动创建了一个客户端包。在其它的服务器或者客户端中，只要使用这个包，就可以调用你的 API，包含了全部类型和完整的自动完成的魔法，像这样：",-1),V=s("p",null,"Every Milkio project automatically creates a client package. In other servers or clients, simply using this package allows you to call your API, including all types and complete automatic completion magic, like this:",-1),G=s("p",null,"与 tRPC 等框架不同的是，它是一个独立的、完全属于你的 npm 包，它不强迫你将所有的工程组成一个 monorepo，它也不会泄露你的源代码，它的内部只有你工程的类型。",-1),z=s("p",null,"Unlike like tRPC, it is a standalone, completely owned npm package that does not force you to organize your project into a monorepo. It also does not leak your source code and only contains the types of your project internally.",-1),Y=s("p",null,"你可以把它发布到 npm 的公共或私有仓库中，或者直接在另一个工程中在本地安装它。你还可以为它添加生命周期方法，例如在每次发送请求之前自动更新 token 或计算签名，使你的包更加易用。",-1),L=s("p",null,"You can publish it to a public or private repository on npm, or install it locally in another project. You can also add lifecycle methods to it, such as automatically updating the token or calculating a signature before each request, to make your package more user-friendly.",-1),Q=s("h2",{id:"自由地切换运行时",tabindex:"-1"},[i("自由地切换运行时 "),s("a",{class:"header-anchor",href:"#自由地切换运行时","aria-label":'Permalink to "自由地切换运行时"'},"​")],-1),H=s("h2",{id:"flexible-runtime-switching",tabindex:"-1"},[i("Flexible Runtime Switching "),s("a",{class:"header-anchor",href:"#flexible-runtime-switching","aria-label":'Permalink to "Flexible Runtime Switching"'},"​")],-1),$=s("p",null,"我们可以自由地切换运行时，这得益于 Milkio 符合 WinterCG 标准。Milkio 的所有的请求与响应都是标准的 Request 和 Response 对象，所有的请求都以符合 WinterCG 标准的 Fetch 发送。没有任何依赖于 Node.js 或者 Bun 的代码。",-1),K=s("p",null,"We can freely switch runtimes thanks to Milkio's adherence to the WinterCG standard. All requests and responses in Milkio are standard Request and Response objects, and all requests are sent using Fetch that conforms to the WinterCG standard. There is no code dependency on Node.js or Bun.",-1),X=s("p",null,"这意味着除了 Milkio 可以运行在 Node.js 和 Bun 中，还可以运行在 Cloudflare Worker、Vercel Edge Function 等任何地方。",-1),Z=s("p",null,"This means that Milkio can run not only in Node.js and Bun, but also in any other platform such as Cloudflare Worker and Vercel Edge Function.",-1),ss=s("p",null,[i("我们有意没有对任何命令进行包装，因此当你阅读 package.json 时，你会发现没有什么 "),s("code",null,"milkio start"),i("，而是 "),s("code",null,"bun ./index.ts"),i("。当你想使用 Bun 以外的运行时时，只需要替换这些相应的命令就可以了。")],-1),is=s("p",null,[i("We intentionally did not wrap any commands, so when you read the package.json file, you will not find any "),s("code",null,"milkio start"),i(" command, but rather "),s("code",null,"bun run ./index.ts"),i(". When you want to use a different runtime than Bun, you just need to replace these corresponding commands.")],-1),es=s("p",null,"并且，我们自己实现了开发时所需要的 Watch、Generate Plugins、Test 等功能，这些功能不依赖于任何运行时，并通过 VS Code 扩展提供。这保证了我们可以轻易地更换运行时，不被任何人所捆绑。",-1),ts=s("p",null,"And, we have implemented our own Watch, Generate Plugins, Test, and other features that are needed during development. These features are not dependent on any runtime and are provided through VS Code extensions. This ensures that we can easily switch runtimes without being tied to anyone.",-1),as=s("h2",{id:"cookbook",tabindex:"-1"},[i("Cookbook "),s("a",{class:"header-anchor",href:"#cookbook","aria-label":'Permalink to "Cookbook"'},"​")],-1),ls=s("h2",{id:"cookbook-1",tabindex:"-1"},[i("Cookbook "),s("a",{class:"header-anchor",href:"#cookbook-1","aria-label":'Permalink to "Cookbook"'},"​")],-1),ns=s("p",null,"todo",-1),hs=s("p",null,"todo",-1),os=s("h2",{id:"serverless",tabindex:"-1"},[i("Serverless "),s("a",{class:"header-anchor",href:"#serverless","aria-label":'Permalink to "Serverless"'},"​")],-1),rs=s("h2",{id:"serverless-1",tabindex:"-1"},[i("Serverless "),s("a",{class:"header-anchor",href:"#serverless-1","aria-label":'Permalink to "Serverless"'},"​")],-1),ks=s("p",null,"在 Serverless 时代下，游戏的规则被改变了。",-1),ds=s("p",null,"In the era of Serverless, the rules of the game have been changed.",-1),ps=s("p",null,"以往，我们的代码运行在单个服务器上，它通常很多的 CPU 核心和很大的内存。而现在，我们的代码往往运行在一个个 Pod 中，它们只拥有一个或更少的 CPU 核心 (是的，有些 Serverless 厂商甚至允许你最少选择 0.05 个) 和很少的内存，但是 Pod 们会随着请求数量增加不断地变多。",-1),cs=s("p",null,"In the past, our code used to run on a single server, which typically had many CPU cores and a large amount of memory. However, now our code often runs in individual Pods, which only have one or fewer CPU cores (yes, some Serverless providers even allow you to choose as little as 0.05) and limited memory. But the number of Pods keeps increasing as the number of requests grows.",-1),Es=s("p",null,"以前，创建多个 worker threads 是能充分利用硬件资源的良好手段，框架运行时不会执行具体的代码，而是创建和 CPU 核心数相等的 worker threads 来执行。但是现在，这么做反而是负担，即便只创建一个 worker threads 也对冷启动速度影响很大。",-1),gs=s("p",null,"In the past, creating multiple worker threads was a good way to fully utilize hardware resources. The framework runtime would create worker threads equal to the number of CPU cores to execute the code. However, nowadays, doing so is actually a burden. Even creating just one worker thread has a significant impact on cold start speed.",-1),ys=s("p",null,"冷启动速度很重要，当一个新的请求到来时，而没有任何一个 Pod 可以复用，Serverless 厂商们就会为你拉起一个新的 Pod。",-1),us=s("p",null,"Cold start speed is crucial. When a new request arrives and there are no reusable Pods available, Serverless providers will spin up a new Pod for you.",-1),ms=s("p",null,"Milkio 利用生成阶段，提前将你的路由、类型安全代码等生成为静态的代码，这可以加速我们应用的启动速度，就像 AOT 在做的事情。",-1),_s=s("p",null,"Milkio utilizes the generation phase to pre-generate your routes, type-safe code, and other static code. This can speed up the startup time of our application, similar to what AOT does.",-1),Fs=s("div",{class:"language-md vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"md"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"冷启动速度")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 2.29ms (1x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 2.32ms (1.01x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"███████████████░░░░░░░░░░░░░░░░░░░░░░░░░ 268.53ms (117.26x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████████████████████████████████████████ 713.13ms (311.41x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Use Macbook Pro 2023")])])])],-1),bs=s("div",{class:"language-md vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"md"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cold start speed")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 2.29ms (1x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 2.32ms (1.01x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"███████████████░░░░░░░░░░░░░░░░░░░░░░░░░ 268.53ms (117.26x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████████████████████████████████████████ 713.13ms (311.41x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Use Macbook Pro 2023")])])])],-1),fs=s("p",null,"同时，每个 API 都是懒惰加载的，在实际情况下，通常只有一些 API 是热门的，而更多 API 的则是冷门的。而 Pod 的生命周期一般很短，如果我们像以往那样，在启动时就将所有的 API 加载在内存中，除了会导致很长的启动时间之外，还会导致许多内存被浪费。Milkio 只会在 API 被真正调用时才加载它。",-1),As=s("p",null,"Also, each API is lazily loaded, and in practice, only a few APIs are popular while many others are less frequently used. Since the lifespan of a Pod is typically short, loading all APIs into memory during startup, as we used to do, not only results in long startup times but also wastes a lot of memory. Milkio is only loaded when the API is actually called.",-1),vs=s("div",{class:"language-md vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"md"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"内存使用 (首次调用接口在启动后)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 6.02 MB (1x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 6.39 MB (1.06x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"██████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 18.04 MB (3.00x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████████████████████████████████████████ 72.11 MB (11.97x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Use Macbook Pro 2023")])])])],-1),Cs=s("div",{class:"language-md vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"md"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Memory usage (first API call after startup)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"███░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 6.02 MB (1x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Milkio + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 6.39 MB (1.06x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"██████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 18.04 MB (3.00x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"+"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," NestJS + Bun (1024 APIs)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"████████████████████████████████████████ 72.11 MB (11.97x)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Use Macbook Pro 2023")])])])],-1),Bs=s("h2",{id:"前置知识",tabindex:"-1"},[i("前置知识 "),s("a",{class:"header-anchor",href:"#前置知识","aria-label":'Permalink to "前置知识"'},"​")],-1),Ps=s("h2",{id:"pre-requisites",tabindex:"-1"},[i("Pre-requisites "),s("a",{class:"header-anchor",href:"#pre-requisites","aria-label":'Permalink to "Pre-requisites"'},"​")],-1),ws=s("p",null,"Milkio 是一个在设计上尽可能地追求简单易懂的框架，但是仍然需要你了解 TypeScript 的基础语法（变量、函数、条件语句、循环、闭包函数、模块）和类型系统（包括基础类型、联合类型、泛型）。如果你还没有全部熟悉这些知识点，就先去学习一下吧！在哔哩哔哩上，有大量优秀且免费的视频课程。",-1),xs=s("p",null,"Milkio is a framework that strives for simplicity and ease of understanding in its design, but it still requires you to have a basic understanding of TypeScript syntax (variables, functions, conditional statements, loops, closure functions, modules) and type system (including basic types, union types, generics). If you are not familiar with all of these concepts yet, I suggest you go and learn them first! There are plenty of excellent and free video courses available on Youtube.",-1),Ms=s("h2",{id:"有想问的吗",tabindex:"-1"},[i("有想问的吗？ "),s("a",{class:"header-anchor",href:"#有想问的吗","aria-label":'Permalink to "有想问的吗？"'},"​")],-1),Is=s("h2",{id:"got-questions",tabindex:"-1"},[i("Got Questions? "),s("a",{class:"header-anchor",href:"#got-questions","aria-label":'Permalink to "Got Questions?"'},"​")],-1),Ds=s("p",null,"欢迎加入我的 QQ 频道！我和其他正在使用 Milkio 的用户，都很愿意为你解答~",-1),Ss=s("p",null,"Welcome to join my Discord! I and other Milkio users are willing to answer your questions!",-1),Ts=s("p",null,"或者，也可以单纯地和我聊聊天？",-1),js=s("p",null,"Or, you can simply chat with me?",-1),qs={href:"https://pd.qq.com/s/4luhx1def",target:"_blank",style:{"text-decoration":"none"}},Js={href:"https://discord.gg/DS35fmxGnp",target:"_blank",style:{"text-decoration":"none"}},Gs=JSON.parse('{"title":"Introduction","description":"","frontmatter":{"title":"Introduction"},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),Ns={name:"index.md"},zs=Object.assign(Ns,{setup(Ws){const h=[{avatar:"./avatar.png",name:"可可☕晨间咖啡厅",title:"QQ 频道"}],o=[{avatar:"./avatar.png",name:"Kecream Morning Cafe ☕",title:"Discord"}];return(Os,Us)=>{const t=k("I18N");return d(),r("div",null,[e(t,null,{default:a(()=>[p,c,E,g,y,u,m,_,F,b,f,A,v,C,B,P,w,x,M,I,D,S,T,j,q,J,N,W,O,U,R,V]),_:1}),e(t,null,{default:a(()=>[G,z,Y,L,Q,H,$,K,X,Z,ss,is,es,ts,as,ls,ns,hs,os,rs,ks,ds,ps,cs,Es,gs,ys,us,ms,_s,Fs,bs,fs,As,vs,Cs,Bs,Ps,ws,xs,Ms,Is,Ds,Ss,Ts,js]),_:1}),e(t,null,{default:a(()=>[s("a",qs,[e(n(l),{size:"small",members:h})]),s("a",Js,[e(n(l),{size:"small",members:o})])]),_:1})])}}});export{Gs as __pageData,zs as default};
