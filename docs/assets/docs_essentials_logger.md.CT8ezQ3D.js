import{_ as l,c as t,J as a,w as n,E as h,o,m as s,a as i}from"./chunks/framework.B_Y9JRDA.js";const cs=JSON.parse('{"title":"Logger","description":"","frontmatter":{"title":"Logger"},"headers":[],"relativePath":"docs/essentials/logger.md","filePath":"docs/essentials/logger.md"}'),r={name:"docs/essentials/logger.md"},k=s("h1",{id:"logger",tabindex:"-1"},[i("Logger "),s("a",{class:"header-anchor",href:"#logger","aria-label":'Permalink to "Logger"'},"​")],-1),d=s("h1",{id:"logger-1",tabindex:"-1"},[i("Logger "),s("a",{class:"header-anchor",href:"#logger-1","aria-label":'Permalink to "Logger"'},"​")],-1),g=s("p",null,[i("日志在应用线上问题排查中扮演着重要的角色。虽然我们可以使用 "),s("code",null,"console"),i(" 打印日志，但我们的日志需求可能更加多样化。例如，我们需要将日志不只是打印在控制台中，而是可以记录为文件，或者使用专门的日志平台。以及，我们需要对不同请求间打印的日志作区分来方便我们排错，尤其是在同时访问人数很多的情况下。")],-1),p=s("p",null,[i("Logs play a crucial role in troubleshooting application issues. While we can use "),s("code",null,"console"),i(" to print logs, our logging requirements may be more diverse. For example, we may need to log not only to the console but also to files or use a dedicated logging platform. Additionally, we need to differentiate logs printed between different requests to facilitate debugging, especially in high-traffic scenarios.")],-1),c=s("p",null,"在任何可以使用 context 的地方，都可以直接使用 logger。logger 的用法几乎和 console 一样。",-1),u=s("p",null,"In any place where context can be used, you can directly use logger. The usage of logger is almost the same as console.",-1),E=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 打印一条普通的日志")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'Hello, Milkio!'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 日志的第二个及之后的参数可以用来携带数据，这样日志会把这些数据也一起记录起来")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'Hello, Milkio!'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", { foo: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'bar '"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 和 console 一样，也可以使用 debug, warn 或者 error 来记录不同级别的日志")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'这里的运行出错了 UwU'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])])],-1),y=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Print a regular log")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'Hello, Milkio!'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// The second and subsequent parameters of the log can be used to carry data, so the log will also record these data together")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'Hello, Milkio!'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", { foo: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'bar '"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// Like console, you can also use debug or warn or error to record logs of different levels")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"context.logger."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"error"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'An error occurred here UwU'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])])],-1),F=s("p",null,[i("或者，也可以使用 "),s("code",null,"useLogger"),i(" 方法来创建一个日志记录器，此时需要提供一个 "),s("code",null,"executeId"),i(" 参数。该参数来自你的 API 的"),s("code",null,"context"),i("对象，并且是唯一的。对于每个请求，"),s("code",null,"executeId"),i("都是不同的。Milkio 的日志记录器通过它们来区分不同的请求。")],-1),m=s("p",null,[i("Alternatively, you can use the "),s("code",null,"useLogger"),i(" method to create a logger, which requires providing an "),s("code",null,"executeId"),i(" parameter. This parameter comes from the "),s("code",null,"context"),i(" object of your API and is unique. For each request, the "),s("code",null,"executeId"),i(" is different. Milkio's loggers use them to differentiate between different requests.")],-1),b=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," logger"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," useLogger"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(context.executeId);")])])])],-1),_=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," logger"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," useLogger"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(context.executeId);")])])])],-1),f=s("p",null,[i("在某些特殊情况下，你可能无法获取到"),s("code",null,"executeId"),i("。这种情况下，你可以传入"),s("code",null,"global"),i("，日志记录器将向所有并发请求同时写入该日志。")],-1),C=s("p",null,[i("In some special cases, you may not be able to obtain the "),s("code",null,"executeId"),i(". In such cases, you can pass in "),s("code",null,"global"),i(", and the logger will write to the log simultaneously for all concurrent requests.")],-1),x=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," logger"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," useLogger"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"global"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])])],-1),A=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," logger"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," useLogger"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"global"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])])],-1),v=s("h2",{id:"日志标签",tabindex:"-1"},[i("日志标签 "),s("a",{class:"header-anchor",href:"#日志标签","aria-label":'Permalink to "日志标签"'},"​")],-1),B=s("h2",{id:"log-tags",tabindex:"-1"},[i("Log Tags "),s("a",{class:"header-anchor",href:"#log-tags","aria-label":'Permalink to "Log Tags"'},"​")],-1),D=s("p",null,[i("除了打印日志之外，你还可以为一个请求打上日志标签。通过 "),s("code",null,"loggerPushTags"),i(" 方法，可以为某个请求添加若干自定义标签。")],-1),I=s("p",null,[i("In addition to logging, you can also label a request with log tags. By using the "),s("code",null,"loggerPushTags"),i(" method, you can add multiple custom tags to a request.")],-1),w=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { loggerPushTags } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"loggerPushTags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(executeId, { userInfo: "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", permissions: "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," });")])])])],-1),q=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { loggerPushTags } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"loggerPushTags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(executeId, { userInfo: "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", permissions: "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," });")])])])],-1),P=s("p",null,"在以往的日志中，我们常常直接将请求的用户信息、权限等数据输出到日志中，这样会掩盖了关键信息。合理地使用标签有助于使你的日志更加清晰易读，只保留关键信息。",-1),L=s("p",null,"In previous logs, we often directly output user information, permissions, and other data of the requests to the logs, which obscures critical information. Using labels appropriately helps make your logs clearer and easier to read, while retaining only the key information.",-1),T=s("h2",{id:"内置日志标签",tabindex:"-1"},[i("内置日志标签 "),s("a",{class:"header-anchor",href:"#内置日志标签","aria-label":'Permalink to "内置日志标签"'},"​")],-1),O=s("p",null,"Built-in log tags",-1),M=s("p",null,"Milkio 会自动为你的每个请求添加一些日志标签。以下标签会被使用：",-1),S=s("p",null,"Milkio will automatically add some logging labels to each of your requests. The following labels will be used:",-1),H=s("table",null,[s("thead",null,[s("tr",null,[s("th",{style:{"text-align":"right"}},"键"),s("th",null,"值")])]),s("tbody",null,[s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"from")]),s("td",null,'来源 "http-server" | "execute"')]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"executeId")]),s("td",null,"执行此请求的唯一 id")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"method")]),s("td",null,"请求方式")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"ip")]),s("td",null,"请求发起者的 IP 地址")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"url")]),s("td",null,"请求地址")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"params")]),s("td",null,"请求的参数 (Object)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"body")]),s("td",null,"最终响应的数据 (Raw String)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"timein")]),s("td",null,"接收到请求的时间 (Number)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"timeout")]),s("td",null,"请求响应的时间 (Number)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"requestHeaders")]),s("td",null,"请求头 (Object)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"responseHeaders")]),s("td",null,"响应头 (Object)")])])],-1),N=s("table",null,[s("thead",null,[s("tr",null,[s("th",{style:{"text-align":"right"}},"Key"),s("th",null,"Value")])]),s("tbody",null,[s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"from")]),s("td",null,'Source: "http-server" | "execute"')]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"executeId")]),s("td",null,"Unique ID of the execution of this request")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"method")]),s("td",null,"Request method")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"ip")]),s("td",null,"IP address of the requester")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"url")]),s("td",null,"Request URL")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"params")]),s("td",null,"Request parameters (Object)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"body")]),s("td",null,"Raw string of the final response")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"timein")]),s("td",null,"Time when the request was received (Number)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"timeout")]),s("td",null,"Time for the request to respond (Number)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"requestHeaders")]),s("td",null,"Request headers (Object)")]),s("tr",null,[s("td",{style:{"text-align":"right"}},[s("code",null,"responseHeaders")]),s("td",null,"Response headers (Object)")])])],-1),R=s("p",null,[i("注意，你不能假设这些日志标签始终存在。例如，在某些极端情况下，请求被直接终止时，可能不会添加"),s("code",null,"body"),i("、"),s("code",null,"params"),i("、"),s("code",null,"responseHeaders"),i("等内容。此外，当通过编写 "),s("code",null,"execute"),i(" 代码而不是发送 HTTP 请求的方式进行调用时，像 "),s("code",null,"ip"),i(" 等数据将不存在，并且可能会获得其他一些值。")],-1),U=s("p",null,[i("Understood. Please note that these log labels may not always be present. For example, in certain extreme cases where a request is terminated directly, contents such as "),s("code",null,"body"),i(", "),s("code",null,"params"),i(", "),s("code",null,"responseHeaders"),i(", etc. may not be added. Additionally, when calling via code using "),s("code",null,"execute"),i(" instead of sending an HTTP request, data like "),s("code",null,"ip"),i(" may not exist and other values may be obtained.")],-1),j=s("h2",{id:"自定义日志记录器",tabindex:"-1"},[i("自定义日志记录器 "),s("a",{class:"header-anchor",href:"#自定义日志记录器","aria-label":'Permalink to "自定义日志记录器"'},"​")],-1),J=s("h2",{id:"custom-log-recorder",tabindex:"-1"},[i("Custom log recorder "),s("a",{class:"header-anchor",href:"#custom-log-recorder","aria-label":'Permalink to "Custom log recorder"'},"​")],-1),V=s("p",null,[i("你可以根据需要自由修改 "),s("code",null,"/src/logger.ts"),i(" 来自定义日志记录器的行为。默认情况下，根据代码编写，你的日志记录器会直接在控制台中显示日志。")],-1),$=s("p",null,[i("You are free to modify "),s("code",null,"/src/logger.ts"),i(" according to your needs to customize the behavior of the log recorder. By default, based on the code, your log recorder will display the logs directly in the console.")],-1),Y=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 文件: /src/logger.ts")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," LoggerOptions, "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ExecuteId } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," loggerOptions"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  onSubmit"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"logs"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`🥛 Milkio 响应！来自 :`"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", tags.url);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"JSON"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"stringify"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tags));")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  onInsert"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"options"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console[options.loggerLevel](options.description, "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"options.params);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"} "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"satisfies"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoggerOptions"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])])],-1),W=s("div",{class:"language-ts vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// file: /src/logger.ts")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," LoggerOptions, "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ExecuteId } "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Milkio"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," loggerOptions"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  onSubmit"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"tags"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"logs"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`🥛 Milkio Responsed! by :`"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", tags.url);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"JSON"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"stringify"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tags));")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  onInsert"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ("),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"options"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=>"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    console[options.loggerLevel](options.description, "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"..."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"options.params);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"} "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"satisfies"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LoggerOptions"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])])],-1),z=s("h3",{id:"onsubmit",tabindex:"-1"},[i("onSubmit "),s("a",{class:"header-anchor",href:"#onsubmit","aria-label":'Permalink to "onSubmit"'},"​")],-1),K=s("h3",{id:"onsubmit-1",tabindex:"-1"},[i("onSubmit "),s("a",{class:"header-anchor",href:"#onsubmit-1","aria-label":'Permalink to "onSubmit"'},"​")],-1),G=s("p",null,[s("code",null,"onSubmit"),i(" 方法会在一个请求即将结束时被调用，它可以是一个异步方法或返回一个"),s("code",null,"Promise"),i("。你可以在此阶段将与该请求相关的日志持久化保存。")],-1),Q=s("p",null,[i("The "),s("code",null,"onSubmit"),i(" method is called when a request is about to be completed. It can be an asynchronous method or return a "),s("code",null,"Promise"),i(". You can use this stage to persistently save logs related to the request.")],-1),X=s("p",null,"在这个方法中，你不仅可以获取该请求中记录的所有历史日志，还可以获取该请求上打过的所有标签。",-1),Z=s("p",null,"In this method, you can not only retrieve all the historical logs recorded in the request, but also retrieve all the tags that have been applied to the request.",-1),ss=s("h3",{id:"oninsert",tabindex:"-1"},[i("onInsert "),s("a",{class:"header-anchor",href:"#oninsert","aria-label":'Permalink to "onInsert"'},"​")],-1),is=s("h3",{id:"oninsert-1",tabindex:"-1"},[i("onInsert "),s("a",{class:"header-anchor",href:"#oninsert-1","aria-label":'Permalink to "onInsert"'},"​")],-1),es=s("p",null,[s("code",null,"onInsert"),i(" 方法是用于在每次记录日志时被调用的，它必须是一个同步方法。你需要返回 "),s("code",null,"true"),i(" 或 "),s("code",null,"false"),i("。当你返回 "),s("code",null,"false"),i(" 时，该日志将被丢弃。举个例子，你可以通过返回 "),s("code",null,"false"),i(" 来实现在生产环境中不记录 "),s("code",null,"debug"),i(" 级别日志的功能。")],-1),ls=s("p",null,[i("The "),s("code",null,"onInsert"),i(" method is called every time a log is recorded, and it must be a synchronous method. You need to return "),s("code",null,"true"),i(" or "),s("code",null,"false"),i(". When you return "),s("code",null,"false"),i(", the log will be discarded. For example, you can return "),s("code",null,"false"),i(" to disable logging of "),s("code",null,"debug"),i(" level logs in a production environment.")],-1),ts=s("p",null,"请不要在此方法中进行日志的持久化保存（例如将日志写入文件或发送到各种日志系统中）。由于每次请求都可能需要写入大量日志，这将导致频繁的 IO 操作，从而降低性能。",-1),as=s("p",null,"Please refrain from persistently saving logs in this method (such as writing logs to files or sending them to various logging systems). As each request may require a large amount of logging, this will result in frequent IO operations, leading to performance degradation.",-1);function ns(hs,os,rs,ks,ds,gs){const e=h("I18N");return o(),t("div",null,[a(e,null,{default:n(()=>[k,d,g,p,c,u,E,y,F,m,b,_,f,C,x,A,v,B,D,I,w,q,P,L,T,O,M,S,H,N,R,U,j,J,V,$,Y,W,z,K,G,Q,X,Z,ss,is,es,ls,ts,as]),_:1})])}const us=l(r,[["render",ns]]);export{cs as __pageData,us as default};
